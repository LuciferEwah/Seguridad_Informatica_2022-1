import os
from Crypto.Cipher import DES
from secrets import token_bytes

key = token_bytes(8)	#(solo 8)
iv = token_bytes(8)	# Vector de inicialización

# Creó un objeto de cifrado DE DES

file = open("Laboratorio4\mensajeentrada.txt", "r")
# Datos necesarios
mensaje_entrada = str(file.readline().lower()).encode()
file.close()
print(mensaje_entrada)
cipher1 = DES.new(key, DES.MODE_CFB, iv)

mensaje_codificado = cipher1.encrypt(mensaje_entrada)
print(mensaje_codificado)

file = open("Laboratorio4\Mensaje_Codificado.txt", "w+")
file.write(str(mensaje_codificado))
file.close()

# Creó un objeto de descifrado (descifrado cifrado no puede usar la misma clave)
cipher2 = DES.new(key, DES.MODE_CFB, iv)
mensaje_recibido = cipher2.decrypt(mensaje_codificado).decode()
print(mensaje_recibido)
file = open("Laboratorio4\mensajerecibido.txt", "w+")
file.write(mensaje_recibido)
file.close()